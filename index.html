<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Shorten Link</title>
  <!-- à¦†à¦ªà¦¨à¦¾à¦° CSS à¦¸à§à¦Ÿà¦¾à¦‡à¦² à¦à¦–à¦¾à¦¨à§‡ à¦¯à§‹à¦— à¦•à¦°à§à¦¨ -->
</head>
<body>
  <div class="container">
    <h2>ðŸ”— Generate Short Link</h2>
    <form id="linkForm">
      <input type="text" name="original_url" placeholder="Enter any URL..." required>
      <button type="submit">Generate</button>
    </form>
    <div id="result"></div>
    
    <!-- à¦Ÿà§‹à¦Ÿà¦¾à¦² à¦¸à§à¦Ÿà§à¦¯à¦¾à¦Ÿà¦¸ -->
    <div class="info-table">
      <table>
        <tr>
          <th>Total Links</th>
          <th>Total Clicks</th>
        </tr>
        <tr>
          <td>{{ total_links }}</td>
          <td>{{ total_clicks }}</td>
        </tr>
      </table>
    </div>
    
    <!-- à¦²à¦¿à¦™à§à¦• à¦²à¦¿à¦¸à§à¦Ÿ -->
    <div class="link-list">
      <table>
        <thead>
          <tr>
            <th>#</th>
            <th>Original Link</th>
            <th>Short Link</th>
            <th>Clicks</th>
          </tr>
        </thead>
        <tbody>
          {% for link in links %}
          <tr>
            <td>{{ loop.index }}</td>
            <td><a href="{{ link[1] }}" target="_blank">{{ link[1] }}</a></td>
            <td><a href="{{ request.host_url }}{{ link[0] }}" target="_blank">{{ request.host_url }}{{ link[0] }}</a></td>
            <td>{{ link[2] }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
  
  <script>
    document.getElementById("linkForm").addEventListener("submit", async (e) => {
      e.preventDefault();
      const formData = new FormData(e.target);
      const response = await fetch("/generate", {
        method: "POST",
        body: formData
      });
      const result = await response.json();
      
      const resultDiv = document.getElementById("result");
      resultDiv.innerHTML = `
        <div class="output">
          <p><strong>Original:</strong> ${result.original_url}</p>
          <p><strong>Shortened:</strong> <a href="${result.short_url}" target="_blank">${result.short_url}</a></p>
        </div>
      `;
    });
  </script>
</body>
</html>
